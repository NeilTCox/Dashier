<% include includes/header.ejs %>
  <title>Dashier - Dashboard</title>
  </head>

  <body>
    <div class="container-fluid dashboard-outer">
      <div class="row">
        <div class="col-md-6 dashboard-left-column">
          <div class="divider">
            <div class="container dashboard-left-container">
              <h1 class="dashboard-username"><a href="https://google.com">@<%= loggedUser.username %></a></h1>
              <div class="container">
                <div class="row settings-logout-row">
                  <div class="col-md-6 dashboard-settings">
                    <form action="https://google.com" method="#">
                      <button type="submit"><i class="fas fa-cog fa-3x" data-fa-transform="down-3"></i></button>
                    </form>
                  </div>
                  <div class="col-md-6 dashboard-logout">
                    <form action="/user/logout" method="get">
                      <button type="submit"><i class="fas fa-sign-out-alt fa-3x" data-fa-transform="down-3"></i></button>
                    </form>
                  </div>
                </div>
                <div class="payment-container">
                  <form class="payment-form" id="payment-form">
                    <div class="form-row">
                      <div class="form-group col-md-1">
                        <label for="amount">Pay</label>
                      </div>
                      <div class="form-group col-md-4">
                        <input type="number" min="0" step="0.00001" class="form-control" name="amount" id="amount" placeholder="amount">
                      </div>
                      <div class="form-group col-md-1">
                        <label for="recipient">to</label>
                      </div>
                      <div class="form-group col-md-4">
                        <input type="text" class="form-control" name="recipient" id="recipient" placeholder="recipient">
                      </div>
                      <div class="form-group col-md-2">
                        <button type="submit" class="btn btn-primary payment-button">âœ”</button>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-11">
                        <input type="text" class="form-control" name="message" id="message" placeholder="message">
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 dashboard-right-column">
          <div class="container post-container">
            <ul class="list-group post-group">
              <% for(var i = postList.length-1; i >= 0; i--){ %>
                <li class="list-group-item">
                  <div class="card text-white bg-primary mb-3">
                    <div class="card-header">
                      <%= postList[i].sender %> paid
                        <%= postList[i].recipient %>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title"><%= postList[i].amount %> Dash</h5>
                      <p class="card-text">
                        <%= postList[i].message %>
                      </p>
                    </div>
                </li>
                <% } %>
            </ul>
            </div>
          </div>
        </div>
      </div>
      <script>
        $(function() {
          $('.payment-form').on('submit', function(event) {
            event.preventDefault();
            var form_data = $('.payment-form').serializeArray();
            $.ajax({
              method: 'POST',
              url: '/post',
              data: form_data
            });
            $('#amount').val('');
            $('#recipient').val('');
            $('#message').val('');
          });
          return;
        });
      </script>
  </body>

  </html>